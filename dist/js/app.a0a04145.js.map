{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/App.vue?4964","webpack:///./src/views/uploadPic.vue?12e8","webpack:///./src/store.js","webpack:///src/views/uploadPic.vue","webpack:///./src/views/uploadPic.vue?8c98","webpack:///./src/views/uploadPic.vue","webpack:///./src/views/completedPic.vue?7fac","webpack:///src/views/completedPic.vue","webpack:///./src/views/completedPic.vue?5fc5","webpack:///./src/views/completedPic.vue","webpack:///src/App.vue","webpack:///./src/App.vue?a7d1","webpack:///./src/App.vue","webpack:///./src/components/cutPic/cutPic.vue?c269","webpack:///src/components/cutPic/cutPic.vue","webpack:///./src/components/cutPic/cutPic.vue?fd27","webpack:///./src/components/cutPic/cutPic.vue","webpack:///./src/components/cutPic/function.js","webpack:///./src/components/cutPic/index.js","webpack:///./src/main.js","webpack:///./src/App.vue?ff7a","webpack:///./src/components/cutPic/cutPic.vue?e9fd","webpack:///./src/views/completedPic.vue?9b91","webpack:///./src/views/uploadPic.vue?f8d1"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","_vm","this","_h","$createElement","_c","_self","attrs","staticClass","_l","tab","class","$store","state","currentCom","on","$event","shiftCom","_v","_s","tag","staticRenderFns","ref","addPic","startCut","resetPic","Vue","use","Vuex","Store","height","images","completedSrc","delImg","flag","mutations","changeHeight","newH","changeSpHeight","payload","order","cutheight","changeCurrent","newCurrent","setSrc","src","clearImgs","addImg","afterDel","store","computed","watch","newFlag","list","$refs","picList","querySelectorAll","removeChild","setTimeout","mounted","methods","pics","document","commit","canvas","createElement","context","getContext","comHeight","width","IMG_WIDTH","canvasHeight","changedH","img","hei","currentH","imgList","console","log","drawImage","toDataURL","component","options","__file","tabs","components","Upload","Completed","stopPropagation","isDraging","startDrag","stopDrag","style","lineStyle","shadeHeight","special","delMyself","specialSelf","$nextTick","isDrag","dragLoading","cutHeight","shade","line","top","picHeight","offsetTop","e","preventDefault","target","className","indexOf","topTap","pageY","targetTouches","h","bottom","cutPicConstructor","extend","cutPic","cutPicFn","instance","vm","$mount","$el","$newCutPicFn","config","productionTip","render","App"],"mappings":"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","file":"js/app.a0a04145.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('div',{staticClass:\"nav\"},_vm._l((_vm.tabs),function(tab){return _c('a',{key:tab,staticClass:\"link\",class:[{ 'choose': _vm.$store.state.currentCom == tab }],on:{\"click\":function($event){_vm.shiftCom(tab)}}},[_vm._v(_vm._s(tab))])}),0),_c('keep-alive',{attrs:{\"exclude\":\"Completed\"}},[_c(_vm.$store.state.currentCom,{tag:\"component\"},[_vm._v(\"Upload Pic\")])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"uploadPic\"}},[_c('div',{ref:\"list\",staticClass:\"cut-pic-list\"},[_c('span',{staticClass:\"text\"},[_vm._v(\"点击右侧按钮上传图片并开始操作\")])]),_c('div',{staticClass:\"mybtn\"},[_c('a',{staticClass:\"mybutton\",attrs:{\"href\":\"javascript:void (0)\"}},[_vm._v(\"\\n      Add\\n      \"),_c('input',{ref:\"selectedPic\",staticClass:\"upload-btn\",attrs:{\"type\":\"file\",\"multiple\":\"\",\"accept\":\"image/*\"},on:{\"change\":function($event){_vm.addPic($event)}}})]),_c('a',{staticClass:\"mybutton\",attrs:{\"href\":\"javascript:void (0)\"},on:{\"click\":_vm.startCut}},[_vm._v(\"Start !\")]),_c('a',{staticClass:\"mybutton reset-btn\",attrs:{\"href\":\"javascript:void (0)\"},on:{\"click\":_vm.resetPic}},[_vm._v(\"Reset\")])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import Vue from 'vue'\r\nimport Vuex from 'vuex'\r\n\r\nVue.use(Vuex)\r\n\r\nexport default new Vuex.Store({\r\n  state: {\r\n    height: 200,\r\n    images: [],\r\n    /*\r\n    {\r\n      imgList: img,\r\n      key: Date,\r\n      *cutheight: height \r\n    }\r\n     */\r\n    currentCom: 'Upload',\r\n    completedSrc: '',\r\n    delImg: {\r\n      i: '',\r\n      flag: false\r\n    }\r\n  },\r\n  mutations: {\r\n    changeHeight(state, newH) {\r\n      state.height = newH;\r\n    },\r\n    changeSpHeight(state, payload) {\r\n      var i = payload.order;\r\n      state.images[i].cutheight = payload.height;\r\n    },\r\n    changeCurrent(state, newCurrent) {\r\n      state.currentCom = newCurrent;\r\n    },\r\n    setSrc(state, src) {\r\n      state.completedSrc = src;\r\n    },\r\n    clearImgs(state) {\r\n      state.images = [];\r\n    },\r\n    addImg(state, payload) {\r\n      state.images.push(payload);\r\n    },\r\n    delImg(state, i){\r\n      state.images.splice(i, 1);\r\n      state.delImg.i = i;\r\n      state.delImg.flag = true;\r\n    },\r\n    afterDel(state) {\r\n      state.delImg.flag = false;\r\n    }\r\n  }\r\n})\r\n","<template>\r\n  <div id=\"uploadPic\">\r\n    <div class=\"cut-pic-list\" ref=\"list\">\r\n      <span class=\"text\">点击右侧按钮上传图片并开始操作</span>\r\n    </div>\r\n    <div class=\"mybtn\">\r\n      <a href=\"javascript:void (0)\" class=\"mybutton\">\r\n        Add\r\n        <input @change=\"addPic($event)\" ref=\"selectedPic\" \r\n        class=\"upload-btn\" \r\n        type=\"file\" multiple accept=\"image/*\">\r\n      </a>\r\n      <a href=\"javascript:void (0)\" class=\"mybutton\" @click=\"startCut\">Start !</a>\r\n      <a href=\"javascript:void (0)\" class=\"mybutton reset-btn\" @click=\"resetPic\">Reset</a>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport store from \"@/store\";\r\nexport default {\r\n  name: \"uploadPic\",\r\n  store,\r\n  computed: {\r\n    delImg() {\r\n      return this.$store.state.delImg.flag;\r\n    }\r\n  },\r\n  watch: {\r\n    delImg(newFlag) {\r\n      if (newFlag) {\r\n        var list = this.$refs.list;\r\n        var picList = list.querySelectorAll(\".pic-item\");\r\n        list.removeChild(picList[this.$store.state.delImg.i]);\r\n        setTimeout(() => {\r\n          this.$store.commit(\"afterDel\");\r\n        }, 100);\r\n      }\r\n    }\r\n  },\r\n  mounted() {\r\n    // this.$refs.list.appendChild(this.$newCutPicFn());\r\n  },\r\n  methods: {\r\n    // 上传图片，并显示在页面上\r\n    async addPic(event) {\r\n      var that = this;\r\n      var files = this.$refs.selectedPic.files;\r\n      if (files.length == 0) {\r\n        return;\r\n      }\r\n      for(let i=0; i<files.length; i++) {\r\n        var file = files[i];\r\n        var reader = new FileReader();\r\n        reader.readAsDataURL(file); // 上传图片\r\n        await new Promise(resolve => {\r\n          reader.onload = function(e) {\r\n            var src = e.target.result; // 图片的地址\r\n            // 将图片添加入state\r\n            var img = new Image();\r\n            img.src = src;\r\n            var key = new Date().getTime();\r\n            var payload = {\r\n              imgList: img,\r\n              key: key\r\n            };\r\n            that.$store.commit(\"addImg\", payload);\r\n            that.$refs.list.appendChild(that.$newCutPicFn(src, key));\r\n            setTimeout(function() {\r\n              window.scrollTo(0, document.body.scrollHeight);\r\n            }, 0);\r\n            resolve();\r\n          };\r\n        })\r\n      }\r\n      // 清除已上传的文件信息\r\n      event.target.value = null;\r\n    },\r\n    // 清空所有已经上传的图片\r\n    resetPic() {\r\n      var pics = document.querySelectorAll(\".pic-item\");\r\n      var i = 0;\r\n      while (i < pics.length) {\r\n        this.$refs.list.removeChild(pics[i]);\r\n        i++;\r\n      }\r\n      pics = null;\r\n      this.$store.commit(\"clearImgs\");\r\n    },\r\n    // 开始合成图片\r\n    startCut() {\r\n      const IMG_WIDTH = 1000;\r\n      // 创建canvas\r\n      var canvas = document.createElement(\"canvas\");\r\n      var context = canvas.getContext(\"2d\");\r\n      var images = this.$store.state.images;\r\n      var comHeight = this.$store.state.height;\r\n      canvas.width = IMG_WIDTH;\r\n      // 循环图片数组，相加得到canvas的高。\r\n      var canvasHeight = 0;\r\n      for (let i = 0; i < images.length; i++) {\r\n        if (images[i].cutheight) {\r\n          canvasHeight += images[i].cutheight;\r\n        } else {\r\n          canvasHeight += comHeight;\r\n        }\r\n      }\r\n      canvas.height = canvasHeight;\r\n      // 换算高宽比例\r\n      var changedH = (img, hei) => {\r\n        if (img.width <= IMG_WIDTH) {\r\n          return hei;\r\n        } else {\r\n          return parseInt((img.width / IMG_WIDTH) * hei);\r\n        }\r\n      };\r\n      // currentH:目前渲染到的高度\r\n      var currentH = 0;\r\n      // 遍历每一个图像，在canvas画布上画出来\r\n      for (let i = 0; i < images.length; i++) {\r\n        var img = images[i];\r\n        var imgList = img.imgList;\r\n        if (img.cutheight) {\r\n          console.log(\"special\");\r\n          context.drawImage(\r\n            imgList,\r\n            0,\r\n            imgList.height - changedH(imgList, img.cutheight),\r\n            imgList.width,\r\n            changedH(imgList, img.cutheight),\r\n            0,\r\n            currentH,\r\n            imgList.width >= IMG_WIDTH ? IMG_WIDTH : imgList.width,\r\n            img.cutheight\r\n          );\r\n          currentH += img.cutheight;\r\n        } else {\r\n          console.log(\"common\");\r\n          context.drawImage(\r\n            imgList,\r\n            0,\r\n            imgList.height - changedH(imgList, comHeight),\r\n            imgList.width,\r\n            changedH(imgList, comHeight),\r\n            0,\r\n            currentH,\r\n            imgList.width >= IMG_WIDTH ? IMG_WIDTH : imgList.width,\r\n            comHeight\r\n          );\r\n          currentH += comHeight;\r\n        }\r\n      }\r\n      // 将canvas画布转为jpeg的图片，将图片地址传给store。\r\n      var src = canvas.toDataURL(\"image/jpeg\", 1.0);\r\n      this.$store.commit(\"setSrc\", src);\r\n      this.$store.commit(\"changeCurrent\", \"Completed\");\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n#uploadPic {\r\n  width: 1280px;\r\n  margin: 0 auto;\r\n  padding: 50px 0 20px;\r\n  position: relative;\r\n  overflow: hidden;\r\n  .cut-pic-list {\r\n    width: 1000px;\r\n    min-height: 500px;\r\n    margin-left: 150px;\r\n    border-radius: 20px;\r\n    position: relative;\r\n    transition: all 2s;\r\n    .text {\r\n      font-size: 30px;\r\n      color: #000;\r\n      font-weight: bold;\r\n      opacity: 0.2;\r\n      position: absolute;\r\n      z-index: 1;\r\n      left: 50%;\r\n      transform: translateX(-50%);\r\n      top: 20%;\r\n      -webkit-user-select: none;\r\n      -ms-user-select: none;\r\n      user-select: none;\r\n    }\r\n  }\r\n  .mybtn {\r\n    width: 200px;\r\n    position: fixed;\r\n    right: 100px;\r\n    top: 200px;\r\n    z-index: 9;\r\n    .mybutton {\r\n      display: inline-block;\r\n      position: relative;\r\n      z-index: 9;\r\n      width: 200px;\r\n      height: 80px;\r\n      line-height: 80px;\r\n      text-align: center;\r\n      background-color: #707477;\r\n      color: #fff;\r\n      font-size: 25px;\r\n      border: 2px solid #fff;\r\n      border-radius: 10px;\r\n      transition: opacity 0.4s;\r\n      cursor: pointer;\r\n      margin: 10px 0;\r\n      -webkit-user-select: none;\r\n      -ms-user-select: none;\r\n      user-select: none;\r\n      &:hover {\r\n        opacity: 0.7;\r\n      }\r\n    }\r\n    .upload-btn {\r\n      position: absolute;\r\n      top: 0;\r\n      left: 0;\r\n      right: 0;\r\n      bottom: 0;\r\n      opacity: 0;\r\n      cursor: pointer;\r\n      width: 200px;\r\n      height: 80px;\r\n    }\r\n    .reset-btn {\r\n      background-color: #5d0000;\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./uploadPic.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./uploadPic.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./uploadPic.vue?vue&type=template&id=2e5c29f2&scoped=true&\"\nimport script from \"./uploadPic.vue?vue&type=script&lang=js&\"\nexport * from \"./uploadPic.vue?vue&type=script&lang=js&\"\nimport style0 from \"./uploadPic.vue?vue&type=style&index=0&id=2e5c29f2&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2e5c29f2\",\n  null\n  \n)\n\ncomponent.options.__file = \"uploadPic.vue\"\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"wrap\"},[(_vm.$store.state.completedSrc)?_c('img',{staticClass:\"pic\",attrs:{\"src\":_vm.$store.state.completedSrc,\"alt\":\"img\"}}):_c('p',{staticClass:\"completed_info\"},[_vm._v(\"点击确认裁剪后，图片会出现在这里\")])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"wrap\">\r\n    <img v-if=\"$store.state.completedSrc\" :src=\"$store.state.completedSrc\" alt=\"img\" class=\"pic\">\r\n    <p class=\"completed_info\" v-else>点击确认裁剪后，图片会出现在这里</p>\r\n    <!-- <img src=\"../img/kate.jpg\" alt=\"\" class=\"pic\"> -->\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport store from \"@/store\";\r\nexport default {\r\n  name: \"completedPic\",\r\n  store\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.wrap {\r\n  text-align: center;\r\n}\r\n.pic {\r\n  min-width: 1000px;\r\n  max-width: 1200px;\r\n  margin: 50px;\r\n}\r\n.completed_info {\r\n  margin-top: 100px;\r\n  color: #999999;\r\n}\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./completedPic.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./completedPic.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./completedPic.vue?vue&type=template&id=39855b48&scoped=true&\"\nimport script from \"./completedPic.vue?vue&type=script&lang=js&\"\nexport * from \"./completedPic.vue?vue&type=script&lang=js&\"\nimport style0 from \"./completedPic.vue?vue&type=style&index=0&id=39855b48&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"39855b48\",\n  null\n  \n)\n\ncomponent.options.__file = \"completedPic.vue\"\nexport default component.exports","<template>\r\n  <div id=\"app\">\r\n    <div class=\"nav\">\r\n      <a\r\n        v-for=\"tab in tabs\"\r\n        :key=\"tab\"\r\n        @click=\"shiftCom(tab)\"\r\n        class=\"link\"\r\n        :class=\"[{ 'choose': $store.state.currentCom == tab }]\"\r\n      >{{ tab }}</a>\r\n    </div>\r\n    <keep-alive exclude=\"Completed\">\r\n      <component :is=\"$store.state.currentCom\">Upload Pic</component>\r\n    </keep-alive>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Upload from \"@/views/uploadPic.vue\";\r\nimport Completed from \"@/views/completedPic.vue\";\r\nimport store from \"@/store\";\r\nexport default {\r\n  name: \"cutSreen\",\r\n  data() {\r\n    return {\r\n      // currentCom: \"Upload\",\r\n      tabs: [\"Upload\", \"Completed\"]\r\n    };\r\n  },\r\n  store,\r\n  components: {\r\n    Upload,\r\n    Completed\r\n  },\r\n  mounted() {},\r\n  methods: {\r\n    shiftCom: function(tab) {\r\n      this.$store.commit('changeCurrent', tab);\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n#app {\r\n  .nav {\r\n    height: 50px;\r\n    background-color: #fff;\r\n    text-align: center;\r\n    .link {\r\n      display: inline-block;\r\n      height: 50px;\r\n      line-height: 50px;\r\n      color: #646464;\r\n      margin: 0 20px;\r\n      padding: 0 5px;\r\n      font-size: 22px;\r\n      -webkit-user-select: none;\r\n      -ms-user-select: none;\r\n      user-select: none;\r\n    }\r\n    .choose {\r\n      border-bottom: 3px solid #646464;\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=4471485f&scoped=true&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&id=4471485f&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4471485f\",\n  null\n  \n)\n\ncomponent.options.__file = \"App.vue\"\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"wholePic\",staticClass:\"pic-item\",on:{\"touchmove\":function($event){$event.stopPropagation();_vm.isDraging($event)},\"touchstart\":function($event){$event.stopPropagation();_vm.startDrag($event)},\"touchend\":function($event){_vm.stopDrag($event)},\"mousedown\":function($event){_vm.startDrag($event)},\"mouseup\":function($event){_vm.stopDrag($event)},\"mousemove\":function($event){_vm.isDraging($event)}}},[_c('img',{staticClass:\"image\",attrs:{\"src\":_vm.src,\"alt\":\"img\"}}),_c('div',{staticClass:\"cut-line\"},[_c('div',{ref:\"shade\",staticClass:\"shade\",style:({'height': _vm.lineStyle.shadeHeight +'px'})}),_c('span',{ref:\"line\",staticClass:\"shift-line\",style:({'top': _vm.lineStyle.shadeHeight + 'px'})},[_c('span',{ref:\"dragBtn\",staticClass:\"arrow dragMe\",class:[{ 'choose': this.special == true }]},[_vm._v(\"...\")])])]),_c('div',{staticClass:\"close-btn\",on:{\"click\":function($event){$event.stopPropagation();_vm.delMyself()},\"touchstart\":function($event){$event.stopPropagation();_vm.delMyself()}}}),_c('div',{staticClass:\"special-btn\",class:[{ 'choose': this.special == true }],on:{\"click\":function($event){$event.stopPropagation();_vm.specialSelf()},\"touchstart\":function($event){$event.stopPropagation();_vm.specialSelf()}}})])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div\r\n    class=\"pic-item\"\r\n    ref=\"wholePic\"\r\n    @touchmove.stop=\"isDraging($event)\"\r\n    @touchstart.stop=\"startDrag($event)\"\r\n    @touchend=\"stopDrag($event)\"\r\n    @mousedown=\"startDrag($event)\"\r\n    @mouseup=\"stopDrag($event)\"\r\n    @mousemove=\"isDraging($event)\"\r\n  >\r\n    <!-- <img src=\"../../img/kate.jpg\"> -->\r\n    <img :src=\"src\" alt=\"img\" class=\"image\">\r\n    <div class=\"cut-line\">\r\n      <div ref=\"shade\" class=\"shade\" :style=\"{'height': lineStyle.shadeHeight +'px'}\"></div>\r\n      <span ref=\"line\" class=\"shift-line\" :style=\"{'top': lineStyle.shadeHeight + 'px'}\">\r\n        <span :class=\"[{ 'choose': this.special == true }]\" ref=\"dragBtn\" class=\"arrow dragMe\">...</span>\r\n      </span>\r\n    </div>\r\n    <div class=\"close-btn\" @click.stop=\"delMyself()\" @touchstart.stop=\"delMyself()\"></div>\r\n    <div\r\n      class=\"special-btn\"\r\n      @click.stop=\"specialSelf()\"\r\n      @touchstart.stop=\"specialSelf()\"\r\n      :class=\"[{ 'choose': this.special == true }]\"\r\n    ></div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport store from \"@/store\";\r\nexport default {\r\n  name: \"cutPic\",\r\n  mounted() {\r\n    // 如果不是nextTick, 拿不到clientHeight\r\n    // nextTick是保证所有dom都渲染完毕\r\n    this.$nextTick(() => {\r\n      // 拿到本图片在所有图片中的顺序序号\r\n      var images = this.$store.state.images;\r\n      for (let i = 0; i < images.length; i++) {\r\n        if (images[i].key == this.key) {\r\n          this.order = i;\r\n        }\r\n      }\r\n      // 初始化css属性，为了之后可以拿到并设置数值\r\n      // 非chrome浏览器里在这里还拿不到clientHeight\r\n      // 通过setTimeout延缓执行顺序\r\n      setTimeout(() => {\r\n        this.lineStyle.shadeHeight = parseFloat(this.picHeight - this.cutHeight);\r\n      }, 0);\r\n    });\r\n  },\r\n  // 使用vuex，就不需要父子组件传值了\r\n  store,\r\n  data() {\r\n    return {\r\n      src: \"\", // 图片的地址\r\n      key: \"\", // 创建这张图片的时间\r\n      isDrag: false, // 鼠标是否按住\r\n      special: false, // 是否与其他图片共享切割高度\r\n      order: \"\", // 自己在所有图片中的位列序号\r\n      lineStyle: {\r\n        shadeHeight: 0,\r\n      },\r\n      dragLoading: false,\r\n    };\r\n  },\r\n  // 监听state的改变，让自己的切割高度与state保持一致\r\n  watch: {\r\n    cutHeight(newH) {\r\n      this.$refs.shade.style.height = parseFloat(this.picHeight - newH) + \"px\";\r\n      this.$refs.line.style.top = parseFloat(this.picHeight - newH) + \"px\";\r\n    }\r\n  },\r\n  computed: {\r\n    // 裁剪高度\r\n    cutHeight() {\r\n      if (this.special) {\r\n        return this.$store.state.images[this.order].cutheight;\r\n      } else {\r\n        return this.$store.state.height;\r\n      }\r\n    },\r\n    // 图片高度\r\n    picHeight() {\r\n      return parseInt(this.$refs.wholePic.clientHeight);\r\n    },\r\n    offsetTop() {\r\n      return parseFloat(this.$refs.wholePic.offsetTop);\r\n    }\r\n  },\r\n  methods: {\r\n    // 鼠标按住\r\n    startDrag(e) {\r\n      e.preventDefault();\r\n      if (e.target.className.indexOf(\"dragMe\") != -1) {\r\n        this.isDrag = true;\r\n      }\r\n    },\r\n    // 鼠标移动\r\n    // TODO: line移动到边界回不来\r\n    isDraging(e) {\r\n      if(!this.isDrag) return;\r\n      if(this.dragLoading) return;\r\n      e.preventDefault();\r\n      if (this.isDrag) {\r\n        var topTap = parseFloat(this.$refs.line.offsetTop);\r\n        console.log(this.$refs.line.offsetTop)\r\n        this.dragLoading = true;\r\n        if(topTap<0) {\r\n          this.lineStyle.shadeHeight = 0;\r\n        }else if(topTap > this.picHeight){\r\n          this.lineStyle.shadeHeight = this.picHeight;\r\n        }else {\r\n          var pageY = e.pageY || e.targetTouches[0].pageY;\r\n          var h = parseFloat(pageY) - 100 - this.offsetTop;\r\n          this.lineStyle.shadeHeight = h;\r\n        }\r\n        this.$nextTick(() => {\r\n          setTimeout(() => {\r\n            this.dragLoading = false;\r\n          }, 50)\r\n        })\r\n      }\r\n    },\r\n    // 鼠标放开\r\n    stopDrag(e) {\r\n      e.preventDefault();\r\n      if(!this.isDrag) return;\r\n      this.isDrag = false;\r\n      var bottom = this.picHeight - parseFloat(this.$refs.shade.clientHeight);\r\n      console.log(\"bottom: \" + bottom);\r\n      // 修改state里的height\r\n      if (e.target.className.indexOf(\"dragMe\") != -1) {\r\n        if (this.special) {\r\n          var payload = {\r\n            order: this.order,\r\n            height: bottom\r\n          };\r\n          this.$store.commit(\"changeSpHeight\", payload);\r\n        } else {\r\n          this.$store.commit(\"changeHeight\", bottom);\r\n        }\r\n      }\r\n    },\r\n    // 删除自身\r\n    delMyself() {\r\n      this.$store.commit(\"delImg\", this.order);\r\n    },\r\n    // 自身脱离高度一致队列\r\n    specialSelf() {\r\n      this.special = !this.special;\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n.pic-item {\r\n  position: relative;\r\n  z-index: 3;\r\n  user-select: none;\r\n  font-size: 0;\r\n  img {\r\n    max-width: 1000px;\r\n  }\r\n  .cut-line {\r\n    .shade {\r\n      position: absolute;\r\n      top: 0;\r\n      left: 0;\r\n      background-color: #000;\r\n      width: 1000px;\r\n      height: 100px;\r\n      opacity: 0.4;\r\n      transition: height 50ms;\r\n    }\r\n    .shift-line {\r\n      display: block;\r\n      position: absolute;\r\n      left: 0;\r\n      top: 100px;\r\n      width: 1000px;\r\n      height: 3px;\r\n      background-color: #fff;\r\n      cursor: pointer;\r\n      //   border: 2px solid #fff;\r\n      border-radius: 5px;\r\n      transition: top 50ms;\r\n      .arrow {\r\n        position: absolute;\r\n        display: block;\r\n        bottom: -20px;\r\n        left: 200px;\r\n        // transform: translate(-50%);\r\n        width: 100px;\r\n        border-radius: 10px;\r\n        background-color: #fff;\r\n        text-align: center;\r\n        color: #868686;\r\n        line-height: 5px;\r\n        font-size: 30px;\r\n        padding: 10px 0 30px;\r\n        transition: all 0.5s;\r\n        &.choose {\r\n          background-color: #868686;\r\n          color: #fff;\r\n        }\r\n      }\r\n    }\r\n  }\r\n  .close-btn {\r\n    width: 40px;\r\n    height: 40px;\r\n    position: absolute;\r\n    background-color: red;\r\n    background: url(\"../../img/del.png\") no-repeat center center / 100%;\r\n    opacity: 0.3;\r\n    left: -70px;\r\n    top: 120px;\r\n    cursor: pointer;\r\n    transition: all 1s;\r\n    &:hover {\r\n      opacity: 1;\r\n    }\r\n  }\r\n  .special-btn {\r\n    width: 50px;\r\n    height: 50px;\r\n    position: absolute;\r\n    background-color: red;\r\n    background: url(\"../../img/qi.png\") no-repeat center center / 100%;\r\n    opacity: 0.3;\r\n    left: -75px;\r\n    top: 20px;\r\n    cursor: pointer;\r\n    transition: all 0.5s;\r\n    &:hover {\r\n      opacity: 1;\r\n    }\r\n    &.choose {\r\n      opacity: 1;\r\n    }\r\n  }\r\n}\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./cutPic.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./cutPic.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./cutPic.vue?vue&type=template&id=14adf79f&scoped=true&\"\nimport script from \"./cutPic.vue?vue&type=script&lang=js&\"\nexport * from \"./cutPic.vue?vue&type=script&lang=js&\"\nimport style0 from \"./cutPic.vue?vue&type=style&index=0&id=14adf79f&scoped=true&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"14adf79f\",\n  null\n  \n)\n\ncomponent.options.__file = \"cutPic.vue\"\nexport default component.exports","import Vue from 'vue'\r\nimport cutPic from './cutPic.vue'\r\n\r\nconst cutPicConstructor = Vue.extend(cutPic); // extend使我们可以通过new方法创建一个组件（参数为对象）\r\n\r\nvar cutPicFn = (src, key) => {\r\n    var instance = new cutPicConstructor({\r\n        data: {\r\n            src: src || null,\r\n            key: key || null\r\n        }\r\n    });\r\n    instance.vm = instance.$mount();\r\n    return instance.vm.$el;\r\n}\r\n\r\nexport default cutPicFn;","import cutPic from './cutPic.vue';\r\nimport cutPicFn from './function'\r\n\r\nexport default (Vue) => {\r\n    // 全局注册，在整个全局都可以使用这个component\r\n    Vue.component(cutPic.name, cutPic);\r\n    Vue.prototype.$newCutPicFn = cutPicFn;\r\n}","import Vue from 'vue'\r\nimport App from './App.vue'\r\n// import router from './router'\r\nimport store from './store'\r\nVue.config.productionTip = false\r\nimport cutPic from './components/cutPic/index'\r\nVue.use(cutPic); //因为export的是一个函数，所以需要用use调用\r\n\r\nnew Vue({\r\n  store,\r\n  render: h => h(App)\r\n}).$mount('#app')\r\n","import mod from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&id=4471485f&lang=less&scoped=true&\"; export default mod; export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&id=4471485f&lang=less&scoped=true&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./cutPic.vue?vue&type=style&index=0&id=14adf79f&scoped=true&lang=less&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./cutPic.vue?vue&type=style&index=0&id=14adf79f&scoped=true&lang=less&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./completedPic.vue?vue&type=style&index=0&id=39855b48&lang=less&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./completedPic.vue?vue&type=style&index=0&id=39855b48&lang=less&scoped=true&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./uploadPic.vue?vue&type=style&index=0&id=2e5c29f2&lang=less&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./uploadPic.vue?vue&type=style&index=0&id=2e5c29f2&lang=less&scoped=true&\""],"sourceRoot":""}